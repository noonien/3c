var ys=Object.defineProperty,Ts=Object.defineProperties;var ks=Object.getOwnPropertyDescriptors;var xr=Object.getOwnPropertySymbols;var Is=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable;var es=(t,s,r)=>s in t?ys(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,ts=(t,s)=>{for(var r in s||(s={}))Is.call(s,r)&&es(t,r,s[r]);if(xr)for(var r of xr(s))Ls.call(s,r)&&es(t,r,s[r]);return t},ls=(t,s)=>Ts(t,ks(s));import{S as Ds,i as zs,s as Ps,e as n,t as u,c as o,a as f,g as c,d as i,f as A,E as e,h as O,k as d,n as h,b as l,l as as,J as Ql,K as rs,L as ss,M as U,N as ns,O as gr,P as S,Q as Jt,R as C,I as os,T as gt,U as Et,V as Bs,W as Er}from"../chunks/vendor-203876ed.js";function Vs(t,s,r){let v=localStorage.getItem(t);if(v!=null){let m=JSON.parse(v);if(Date.now()/1e3-m.date<s)return Promise.resolve(m.data)}return r().then(m=>(localStorage.setItem(t,JSON.stringify({date:Date.now()/1e3,data:m})),m))}function is(t,s,r){const v=t.slice();return v[53]=s[r],v}function us(t,s,r){const v=t.slice();return v[53]=s[r],v}function cs(t,s,r){const v=t.slice();return v[58]=s[r],v}function fs(t,s,r){const v=t.slice();return v[26]=s[r],v}function _s(t){let s,r=t[26].symbol.slice(0,-4)+"",v,m,L;return{c(){s=n("option"),v=u(r),m=u(" / USDT"),this.h()},l(I){s=o(I,"OPTION",{});var _=f(s);v=c(_,r),m=c(_," / USDT"),_.forEach(i),this.h()},h(){s.__value=L=t[26].symbol,s.value=s.__value},m(I,_){A(I,s,_),e(s,v),e(s,m)},p(I,_){_[0]&1&&r!==(r=I[26].symbol.slice(0,-4)+"")&&O(v,r),_[0]&1&&L!==(L=I[26].symbol)&&(s.__value=L,s.value=s.__value)},d(I){I&&i(s)}}}function vs(t){let s,r,v=t[9]*t[13].value/100+"",m,L,I;return{c(){s=n("div"),r=u("Value: "),m=u(v),L=d(),I=u(je),this.h()},l(_){s=o(_,"DIV",{class:!0});var g=f(s);r=c(g,"Value: "),m=c(g,v),L=h(g),I=c(g,je),g.forEach(i),this.h()},h(){l(s,"class","font-bold")},m(_,g){A(_,s,g),e(s,r),e(s,m),e(s,L),e(s,I)},p(_,g){g[0]&8704&&v!==(v=_[9]*_[13].value/100+"")&&O(m,v)},d(_){_&&i(s)}}}function ps(t){let s,r,v=t[9]*t[12].value/100+"",m,L,I;return{c(){s=n("div"),r=u("Value: "),m=u(v),L=d(),I=u(je),this.h()},l(_){s=o(_,"DIV",{class:!0});var g=f(s);r=c(g,"Value: "),m=c(g,v),L=h(g),I=c(g,je),g.forEach(i),this.h()},h(){l(s,"class","font-bold")},m(_,g){A(_,s,g),e(s,r),e(s,m),e(s,L),e(s,I)},p(_,g){g[0]&4608&&v!==(v=_[9]*_[12].value/100+"")&&O(m,v)},d(_){_&&i(s)}}}function ds(t){let s=t[58]+"",r,v;return{c(){r=u(s),v=n("br")},l(m){r=c(m,s),v=o(m,"BR",{})},m(m,L){A(m,r,L),A(m,v,L)},p(m,L){L[0]&98304&&s!==(s=m[58]+"")&&O(r,s)},d(m){m&&i(r),m&&i(v)}}}function hs(t){let s,r=t[53].order+"",v,m,L,I,_,g=t[53].errors,V=[];for(let b=0;b<g.length;b+=1)V[b]=ds(cs(t,g,b));return{c(){s=u("Order: "),v=u(r),m=d(),L=n("br"),I=d();for(let b=0;b<V.length;b+=1)V[b].c();_=as()},l(b){s=c(b,"Order: "),v=c(b,r),m=h(b),L=o(b,"BR",{}),I=h(b);for(let E=0;E<V.length;E+=1)V[E].l(b);_=as()},m(b,E){A(b,s,E),A(b,v,E),A(b,m,E),A(b,L,E),A(b,I,E);for(let N=0;N<V.length;N+=1)V[N].m(b,E);A(b,_,E)},p(b,E){if(E[0]&98304&&r!==(r=b[53].order+"")&&O(v,r),E[0]&98304){g=b[53].errors;let N;for(N=0;N<g.length;N+=1){const Q=cs(b,g,N);V[N]?V[N].p(Q,E):(V[N]=ds(Q),V[N].c(),V[N].m(_.parentNode,_))}for(;N<V.length;N+=1)V[N].d(1);V.length=g.length}},d(b){b&&i(s),b&&i(v),b&&i(m),b&&i(L),b&&i(I),Ql(V,b),b&&i(_)}}}function bs(t){let s,r,v=t[53].order+"",m,L,I,_=T(t[53].price_dev)+"",g,V,b=T(t[53].price)+"",E,N,Q,M,oe=-T((1-t[53].avg_price/t[1])*100)+"",X,J,ye=T(t[53].avg_price)+"",ee,q,Je,w,Z=T(t[53].req_price)+"",Y,Ue,pe=T(t[53].req_change)+"",de,at,j=T(t[53].tp)+"",te,Ze,Ae,H,F=T(t[53].volume)+"",$e,Ke,K=T(t[53].margin)+"",he,rt,Te,Le,Qe=T(t[53].pnl)+"",xe,ie,De,be,Ye=T(t[53].total_volume)+"",me,le,Fe=T(t[53].total_margin)+"",Me,$,ke,st,ze;function B(){return t[51](t[53])}return{c(){s=n("tr"),r=n("td"),m=u(v),L=d(),I=n("td"),g=u(_),V=u("% ($"),E=u(b),N=u(")"),Q=d(),M=n("td"),X=u(oe),J=u("% ($"),ee=u(ye),q=u(")"),Je=d(),w=n("td"),Y=u(Z),Ue=u("$ ("),de=u(pe),at=u("%) / +"),te=u(j),Ze=u("$"),Ae=d(),H=n("td"),$e=u(F),Ke=u("$ ($"),he=u(K),rt=u(")"),Te=d(),Le=n("td"),xe=u(Qe),ie=u("$"),De=d(),be=n("td"),me=u(Ye),le=u("$ ("),Me=u(Fe),$=u("$)"),ke=d(),this.h()},l(ae){s=o(ae,"TR",{class:!0});var D=f(s);r=o(D,"TD",{class:!0});var Pe=f(r);m=c(Pe,v),Pe.forEach(i),L=h(D),I=o(D,"TD",{class:!0});var R=f(I);g=c(R,_),V=c(R,"% ($"),E=c(R,b),N=c(R,")"),R.forEach(i),Q=h(D),M=o(D,"TD",{class:!0});var re=f(M);X=c(re,oe),J=c(re,"% ($"),ee=c(re,ye),q=c(re,")"),re.forEach(i),Je=h(D),w=o(D,"TD",{style:!0,class:!0});var x=f(w);Y=c(x,Z),Ue=c(x,"$ ("),de=c(x,pe),at=c(x,"%) / +"),te=c(x,j),Ze=c(x,"$"),x.forEach(i),Ae=h(D),H=o(D,"TD",{class:!0});var G=f(H);$e=c(G,F),Ke=c(G,"$ ($"),he=c(G,K),rt=c(G,")"),G.forEach(i),Te=h(D),Le=o(D,"TD",{class:!0});var W=f(Le);xe=c(W,Qe),ie=c(W,"$"),W.forEach(i),De=h(D),be=o(D,"TD",{class:!0});var ge=f(be);me=c(ge,Ye),le=c(ge,"$ ("),Me=c(ge,Fe),$=c(ge,"$)"),ge.forEach(i),ke=h(D),D.forEach(i),this.h()},h(){l(r,"class","svelte-zftrlb"),l(I,"class","svelte-zftrlb"),l(M,"class","svelte-zftrlb"),rs(w,"background-color",t[53].errors.length>0?"":Es((t[53].req_change-t[4])/(t[5]-t[4]),.3,t[25])),l(w,"class","svelte-zftrlb"),l(H,"class","svelte-zftrlb"),l(Le,"class","svelte-zftrlb"),l(be,"class","svelte-zftrlb"),l(s,"class","svelte-zftrlb"),ss(s,"liquidated",t[53].errors.length>0)},m(ae,D){A(ae,s,D),e(s,r),e(r,m),e(s,L),e(s,I),e(I,g),e(I,V),e(I,E),e(I,N),e(s,Q),e(s,M),e(M,X),e(M,J),e(M,ee),e(M,q),e(s,Je),e(s,w),e(w,Y),e(w,Ue),e(w,de),e(w,at),e(w,te),e(w,Ze),e(s,Ae),e(s,H),e(H,$e),e(H,Ke),e(H,he),e(H,rt),e(s,Te),e(s,Le),e(Le,xe),e(Le,ie),e(s,De),e(s,be),e(be,me),e(be,le),e(be,Me),e(be,$),e(s,ke),st||(ze=[U(s,"mouseenter",B),U(s,"mouseleave",t[52])],st=!0)},p(ae,D){t=ae,D[0]&8&&v!==(v=t[53].order+"")&&O(m,v),D[0]&8&&_!==(_=T(t[53].price_dev)+"")&&O(g,_),D[0]&8&&b!==(b=T(t[53].price)+"")&&O(E,b),D[0]&10&&oe!==(oe=-T((1-t[53].avg_price/t[1])*100)+"")&&O(X,oe),D[0]&8&&ye!==(ye=T(t[53].avg_price)+"")&&O(ee,ye),D[0]&8&&Z!==(Z=T(t[53].req_price)+"")&&O(Y,Z),D[0]&8&&pe!==(pe=T(t[53].req_change)+"")&&O(de,pe),D[0]&8&&j!==(j=T(t[53].tp)+"")&&O(te,j),D[0]&56&&rs(w,"background-color",t[53].errors.length>0?"":Es((t[53].req_change-t[4])/(t[5]-t[4]),.3,t[25])),D[0]&8&&F!==(F=T(t[53].volume)+"")&&O($e,F),D[0]&8&&K!==(K=T(t[53].margin)+"")&&O(he,K),D[0]&8&&Qe!==(Qe=T(t[53].pnl)+"")&&O(xe,Qe),D[0]&8&&Ye!==(Ye=T(t[53].total_volume)+"")&&O(me,Ye),D[0]&8&&Fe!==(Fe=T(t[53].total_margin)+"")&&O(Me,Fe),D[0]&8&&ss(s,"liquidated",t[53].errors.length>0)},d(ae){ae&&i(s),st=!1,ns(ze)}}}function Ns(t){let s,r,v,m,L,I,_,g,V,b,E,N,Q,M,oe,X,J,ye,ee,q,Je,w,Z,Y,Ue,pe,de,at,j,te,Ze,Ae,H,F,$e,Ke,K,he,rt,Te,Le,Qe,xe,ie,De,be,Ye,me,le,Fe,Me,$,ke,st,ze,B,ae,D,Pe,R,re,x,G,W,ge,se,Be,it,nt,et,yt,Kt,tt,Ee,Qt,Yl,ut,Tt,Fl,Gl,ct,qe,Xl,Ge,Zl,ft,kt,$l,xl,_t,Ve,sl,ea,we,nl,ta,vt,It,la,aa,lt,Ne,ra,We,sa,Pt,na,oa,pt,Lt,ia,ua,dt,Re,ca,Ce,fa,ht,Dt,_a,va,bt,Se,pa,He,da,y,ha,ba,ma,Yt=T(t[2].total_margin)+"",ol,ga,Ft=T(t[2].total_margin/t[9]*100)+"",il,Ea,ya,Ta,Gt=T(t[2].total_volume)+"",ul,ka,Ia,La,Xt=T(t[8])+"",cl,Da,za,Pa,Zt=T(t[2].price_dev)+"",fl,Ba,Va,Na,Ra,Sa,Oa,Ua,Aa,Ma,$t=T(t[2].total_margin)+"",_l,qa,wa,Wa,xt=T(-t[2].pnl)+"",vl,Ca,Ha,ja,el=T(t[9]-t[2].total_margin+t[2].pnl)+"",pl,Ja,Ka,Qa,tl=T(t[14])+"",dl,Ya,Fa,Ga,ll=-T(100-t[14]/t[1]*100)+"",hl,Xa,Za,$a,al=-T(100-t[14]/t[1]*100+t[2].price_dev)+"",bl,xa,er,ml,gl,El,ot,yl,Tl,kl,Il,Ll,Bt,Dl,zl,mt,rl,ne,Vt,tr,lr,Nt,ar,rr,Rt,sr,nr,St,or,ir,Ot,ur,cr,Ut,fr,_r,At,vr,pr,Mt,dr,yr,qt=t[0],ue=[];for(let a=0;a<qt.length;a+=1)ue[a]=_s(fs(t,qt,a));let ce=t[13].type=="%"&&vs(t),fe=t[12].type=="%"&&ps(t),wt=t[15]?[t[16]||t[15]]:[],_e=[];for(let a=0;a<wt.length;a+=1)_e[a]=hs(us(t,wt,a));let Wt=t[3],ve=[];for(let a=0;a<Wt.length;a+=1)ve[a]=bs(is(t,Wt,a));return{c(){s=n("div"),r=n("div"),v=n("div"),m=n("label"),L=u("Wallet Balance"),I=d(),_=n("div"),g=n("input"),V=d(),b=n("span"),E=u(je),N=d(),Q=n("div"),M=n("label"),oe=u("Coin"),X=d(),J=n("select");for(let a=0;a<ue.length;a+=1)ue[a].c();ye=d(),ee=n("div"),q=n("label"),Je=u("Entry Price"),w=d(),Z=n("div"),Y=n("input"),Ue=d(),pe=n("span"),de=u(je),at=d(),j=n("div"),te=n("label"),Ze=u("Base Order size"),Ae=d(),H=n("div"),F=n("input"),$e=d(),Ke=n("div"),K=n("select"),he=n("option"),rt=u("%"),Te=n("option"),Le=u(je),Qe=d(),ce&&ce.c(),xe=d(),ie=n("div"),De=n("label"),be=u("Safety Order size"),Ye=d(),me=n("div"),le=n("input"),Fe=d(),Me=n("div"),$=n("select"),ke=n("option"),st=u("%"),ze=n("option"),B=u(je),ae=d(),fe&&fe.c(),D=d(),Pe=n("div"),R=n("label"),re=u("Take Profit"),x=d(),G=n("div"),W=n("input"),ge=d(),se=n("span"),Be=u("%"),it=d(),nt=n("div"),et=n("label"),yt=u("Long or short"),Kt=d(),tt=n("div"),Ee=n("input"),Qt=u(`
        Long`),Yl=d(),ut=n("div"),Tt=n("label"),Fl=u("Max safety trades count"),Gl=d(),ct=n("div"),qe=n("input"),Xl=d(),Ge=n("input"),Zl=d(),ft=n("div"),kt=n("label"),$l=u("Leverage"),xl=d(),_t=n("div"),Ve=n("input"),ea=d(),we=n("input"),ta=d(),vt=n("div"),It=n("label"),la=u("Price deviation to open safety orders"),aa=d(),lt=n("div"),Ne=n("input"),ra=d(),We=n("input"),sa=d(),Pt=n("span"),na=u("%"),oa=d(),pt=n("div"),Lt=n("label"),ia=u("Safety order volume scale"),ua=d(),dt=n("div"),Re=n("input"),ca=d(),Ce=n("input"),fa=d(),ht=n("div"),Dt=n("label"),_a=u("Safety order step scale"),va=d(),bt=n("div"),Se=n("input"),pa=d(),He=n("input"),da=d(),y=n("div"),ha=u(`Bot info:
    `),ba=n("br"),ma=u(`
    Max amount for bot usage: `),ol=u(Yt),ga=u("$ ("),il=u(Ft),Ea=u(`%)
    `),ya=n("br"),Ta=u(`
    Max deal volume: `),ul=u(Gt),ka=u(`$
    `),Ia=n("br"),La=u(`
    Leverage: `),cl=u(Xt),Da=d(),za=n("br"),Pa=u(`
    Max. safe order price deviation: `),fl=u(Zt),Ba=u(`%

    `),Va=n("br"),Na=d(),Ra=n("br"),Sa=d(),Oa=n("br"),Ua=u(`

    Recommended Min. Wallet balance:
    `),Aa=n("br"),Ma=u(`
    Max amount for bot usage: `),_l=u($t),qa=u(`$
    `),wa=n("br"),Wa=u(`
    Wallet reserve: `),vl=u(xt),Ca=u(`$
    `),Ha=n("br"),ja=u(`
    Additional Reserve: `),pl=u(el),Ja=u(`$
    `),Ka=n("br"),Qa=u(`
    Liquidation at price: `),dl=u(tl),Ya=d(),Fa=n("br"),Ga=u(`
    Drop from entry: `),hl=u(ll),Xa=u(`%
    `),Za=n("br"),$a=u(`
    Drop from last SO: `),bl=u(al),xa=u(`%
    `),er=n("br"),ml=d(),gl=n("br"),El=u(`
Reverse: `),ot=n("input"),yl=d(),Tl=n("br"),kl=d(),Il=n("br"),Ll=d();for(let a=0;a<_e.length;a+=1)_e[a].c();Bt=d(),Dl=n("br"),zl=d(),mt=n("table"),rl=n("thead"),ne=n("tr"),Vt=n("th"),tr=u("Order #"),lr=d(),Nt=n("th"),ar=u("Price Dev."),rr=d(),Rt=n("th"),sr=u("Avg. Price"),nr=d(),St=n("th"),or=u("Required price / Profit"),ir=d(),Ot=n("th"),ur=u("Order Size (Margin)"),cr=d(),Ut=n("th"),fr=u("PnL"),_r=d(),At=n("th"),vr=u("Total Volume (Margin)"),pr=d(),Mt=n("tbody");for(let a=0;a<ve.length;a+=1)ve[a].c();this.h()},l(a){s=o(a,"DIV",{class:!0});var p=f(s);r=o(p,"DIV",{class:!0});var P=f(r);v=o(P,"DIV",{});var zt=f(v);m=o(zt,"LABEL",{for:!0,class:!0});var z=f(m);L=c(z,"Wallet Balance"),z.forEach(i),I=h(zt),_=o(zt,"DIV",{class:!0});var Oe=f(_);g=o(Oe,"INPUT",{type:!0,name:!0,step:!0,class:!0}),V=h(Oe),b=o(Oe,"SPAN",{class:!0});var Tr=f(b);E=c(Tr,je),Tr.forEach(i),Oe.forEach(i),zt.forEach(i),N=h(P),Q=o(P,"DIV",{});var Pl=f(Q);M=o(Pl,"LABEL",{for:!0,class:!0});var kr=f(M);oe=c(kr,"Coin"),kr.forEach(i),X=h(Pl),J=o(Pl,"SELECT",{name:!0,class:!0});var Ir=f(J);for(let Xe=0;Xe<ue.length;Xe+=1)ue[Xe].l(Ir);Ir.forEach(i),Pl.forEach(i),ye=h(P),ee=o(P,"DIV",{});var Bl=f(ee);q=o(Bl,"LABEL",{for:!0,class:!0});var Lr=f(q);Je=c(Lr,"Entry Price"),Lr.forEach(i),w=h(Bl),Z=o(Bl,"DIV",{class:!0});var Vl=f(Z);Y=o(Vl,"INPUT",{type:!0,name:!0,class:!0}),Ue=h(Vl),pe=o(Vl,"SPAN",{class:!0});var Dr=f(pe);de=c(Dr,je),Dr.forEach(i),Vl.forEach(i),Bl.forEach(i),at=h(P),j=o(P,"DIV",{});var Ct=f(j);te=o(Ct,"LABEL",{for:!0,class:!0});var zr=f(te);Ze=c(zr,"Base Order size"),zr.forEach(i),Ae=h(Ct),H=o(Ct,"DIV",{class:!0});var Nl=f(H);F=o(Nl,"INPUT",{type:!0,name:!0,step:!0,class:!0}),$e=h(Nl),Ke=o(Nl,"DIV",{});var Pr=f(Ke);K=o(Pr,"SELECT",{name:!0,class:!0});var hr=f(K);he=o(hr,"OPTION",{});var Br=f(he);rt=c(Br,"%"),Br.forEach(i),Te=o(hr,"OPTION",{});var Vr=f(Te);Le=c(Vr,je),Vr.forEach(i),hr.forEach(i),Pr.forEach(i),Nl.forEach(i),Qe=h(Ct),ce&&ce.l(Ct),Ct.forEach(i),xe=h(P),ie=o(P,"DIV",{});var Ht=f(ie);De=o(Ht,"LABEL",{for:!0,class:!0});var Nr=f(De);be=c(Nr,"Safety Order size"),Nr.forEach(i),Ye=h(Ht),me=o(Ht,"DIV",{class:!0});var Rl=f(me);le=o(Rl,"INPUT",{type:!0,name:!0,step:!0,class:!0}),Fe=h(Rl),Me=o(Rl,"DIV",{});var Rr=f(Me);$=o(Rr,"SELECT",{name:!0,class:!0});var br=f($);ke=o(br,"OPTION",{});var Sr=f(ke);st=c(Sr,"%"),Sr.forEach(i),ze=o(br,"OPTION",{});var Or=f(ze);B=c(Or,je),Or.forEach(i),br.forEach(i),Rr.forEach(i),Rl.forEach(i),ae=h(Ht),fe&&fe.l(Ht),Ht.forEach(i),D=h(P),Pe=o(P,"DIV",{});var Sl=f(Pe);R=o(Sl,"LABEL",{for:!0,class:!0});var Ur=f(R);re=c(Ur,"Take Profit"),Ur.forEach(i),x=h(Sl),G=o(Sl,"DIV",{class:!0});var Ol=f(G);W=o(Ol,"INPUT",{type:!0,name:!0,min:!0,max:!0,step:!0,class:!0}),ge=h(Ol),se=o(Ol,"SPAN",{class:!0});var Ar=f(se);Be=c(Ar,"%"),Ar.forEach(i),Ol.forEach(i),Sl.forEach(i),it=h(P),nt=o(P,"DIV",{});var Ul=f(nt);et=o(Ul,"LABEL",{for:!0,class:!0});var Mr=f(et);yt=c(Mr,"Long or short"),Mr.forEach(i),Kt=h(Ul),tt=o(Ul,"DIV",{class:!0});var mr=f(tt);Ee=o(mr,"INPUT",{type:!0,name:!0,class:!0}),Qt=c(mr,`
        Long`),mr.forEach(i),Ul.forEach(i),Yl=h(P),ut=o(P,"DIV",{class:!0});var Al=f(ut);Tt=o(Al,"LABEL",{for:!0,class:!0});var qr=f(Tt);Fl=c(qr,"Max safety trades count"),qr.forEach(i),Gl=h(Al),ct=o(Al,"DIV",{class:!0});var Ml=f(ct);qe=o(Ml,"INPUT",{name:!0,type:!0,class:!0,min:!0,max:!0}),Xl=h(Ml),Ge=o(Ml,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Ml.forEach(i),Al.forEach(i),Zl=h(P),ft=o(P,"DIV",{class:!0});var ql=f(ft);kt=o(ql,"LABEL",{for:!0,class:!0});var wr=f(kt);$l=c(wr,"Leverage"),wr.forEach(i),xl=h(ql),_t=o(ql,"DIV",{class:!0});var wl=f(_t);Ve=o(wl,"INPUT",{name:!0,type:!0,class:!0,min:!0,max:!0}),ea=h(wl),we=o(wl,"INPUT",{type:!0,min:!0,max:!0,class:!0}),wl.forEach(i),ql.forEach(i),ta=h(P),vt=o(P,"DIV",{class:!0});var Wl=f(vt);It=o(Wl,"LABEL",{for:!0,class:!0});var Wr=f(It);la=c(Wr,"Price deviation to open safety orders"),Wr.forEach(i),aa=h(Wl),lt=o(Wl,"DIV",{class:!0});var jt=f(lt);Ne=o(jt,"INPUT",{name:!0,type:!0,class:!0,min:!0,max:!0,step:!0}),ra=h(jt),We=o(jt,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),sa=h(jt),Pt=o(jt,"SPAN",{class:!0});var Cr=f(Pt);na=c(Cr,"%"),Cr.forEach(i),jt.forEach(i),Wl.forEach(i),oa=h(P),pt=o(P,"DIV",{class:!0});var Cl=f(pt);Lt=o(Cl,"LABEL",{for:!0,class:!0});var Hr=f(Lt);ia=c(Hr,"Safety order volume scale"),Hr.forEach(i),ua=h(Cl),dt=o(Cl,"DIV",{class:!0});var Hl=f(dt);Re=o(Hl,"INPUT",{name:!0,type:!0,class:!0,min:!0,max:!0,step:!0}),ca=h(Hl),Ce=o(Hl,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Hl.forEach(i),Cl.forEach(i),fa=h(P),ht=o(P,"DIV",{class:!0});var jl=f(ht);Dt=o(jl,"LABEL",{for:!0,class:!0});var jr=f(Dt);_a=c(jr,"Safety order step scale"),jr.forEach(i),va=h(jl),bt=o(jl,"DIV",{class:!0});var Jl=f(bt);Se=o(Jl,"INPUT",{name:!0,type:!0,class:!0,min:!0,max:!0,step:!0}),pa=h(Jl),He=o(Jl,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),Jl.forEach(i),jl.forEach(i),P.forEach(i),da=h(p),y=o(p,"DIV",{});var k=f(y);ha=c(k,`Bot info:
    `),ba=o(k,"BR",{}),ma=c(k,`
    Max amount for bot usage: `),ol=c(k,Yt),ga=c(k,"$ ("),il=c(k,Ft),Ea=c(k,`%)
    `),ya=o(k,"BR",{}),Ta=c(k,`
    Max deal volume: `),ul=c(k,Gt),ka=c(k,`$
    `),Ia=o(k,"BR",{}),La=c(k,`
    Leverage: `),cl=c(k,Xt),Da=h(k),za=o(k,"BR",{}),Pa=c(k,`
    Max. safe order price deviation: `),fl=c(k,Zt),Ba=c(k,`%

    `),Va=o(k,"BR",{}),Na=h(k),Ra=o(k,"BR",{}),Sa=h(k),Oa=o(k,"BR",{}),Ua=c(k,`

    Recommended Min. Wallet balance:
    `),Aa=o(k,"BR",{}),Ma=c(k,`
    Max amount for bot usage: `),_l=c(k,$t),qa=c(k,`$
    `),wa=o(k,"BR",{}),Wa=c(k,`
    Wallet reserve: `),vl=c(k,xt),Ca=c(k,`$
    `),Ha=o(k,"BR",{}),ja=c(k,`
    Additional Reserve: `),pl=c(k,el),Ja=c(k,`$
    `),Ka=o(k,"BR",{}),Qa=c(k,`
    Liquidation at price: `),dl=c(k,tl),Ya=h(k),Fa=o(k,"BR",{}),Ga=c(k,`
    Drop from entry: `),hl=c(k,ll),Xa=c(k,`%
    `),Za=o(k,"BR",{}),$a=c(k,`
    Drop from last SO: `),bl=c(k,al),xa=c(k,`%
    `),er=o(k,"BR",{}),k.forEach(i),p.forEach(i),ml=h(a),gl=o(a,"BR",{}),El=c(a,`
Reverse: `),ot=o(a,"INPUT",{type:!0,class:!0}),yl=h(a),Tl=o(a,"BR",{}),kl=h(a),Il=o(a,"BR",{}),Ll=h(a);for(let Xe=0;Xe<_e.length;Xe+=1)_e[Xe].l(a);Bt=h(a),Dl=o(a,"BR",{}),zl=h(a),mt=o(a,"TABLE",{});var Kl=f(mt);rl=o(Kl,"THEAD",{});var Jr=f(rl);ne=o(Jr,"TR",{});var Ie=f(ne);Vt=o(Ie,"TH",{class:!0});var Kr=f(Vt);tr=c(Kr,"Order #"),Kr.forEach(i),lr=h(Ie),Nt=o(Ie,"TH",{class:!0});var Qr=f(Nt);ar=c(Qr,"Price Dev."),Qr.forEach(i),rr=h(Ie),Rt=o(Ie,"TH",{class:!0});var Yr=f(Rt);sr=c(Yr,"Avg. Price"),Yr.forEach(i),nr=h(Ie),St=o(Ie,"TH",{class:!0});var Fr=f(St);or=c(Fr,"Required price / Profit"),Fr.forEach(i),ir=h(Ie),Ot=o(Ie,"TH",{class:!0});var Gr=f(Ot);ur=c(Gr,"Order Size (Margin)"),Gr.forEach(i),cr=h(Ie),Ut=o(Ie,"TH",{class:!0});var Xr=f(Ut);fr=c(Xr,"PnL"),Xr.forEach(i),_r=h(Ie),At=o(Ie,"TH",{class:!0});var Zr=f(At);vr=c(Zr,"Total Volume (Margin)"),Zr.forEach(i),Ie.forEach(i),Jr.forEach(i),pr=h(Kl),Mt=o(Kl,"TBODY",{});var $r=f(Mt);for(let Xe=0;Xe<ve.length;Xe+=1)ve[Xe].l($r);$r.forEach(i),Kl.forEach(i),this.h()},h(){var a,p;l(m,"for","balance"),l(m,"class","block mb-1"),l(g,"type","number"),l(g,"name","balance"),l(g,"step","10"),l(g,"class","svelte-zftrlb"),l(b,"class","px-4 py-2 border border-l-0 border-gray-500 bg-gray-700"),l(_,"class","flex"),l(M,"for","coin"),l(M,"class","block mb-1"),l(J,"name","coin"),l(J,"class","focus:ring-indigo-500 focus:border-indigo-500 bg-gray-900 block w-full"),t[7]===void 0&&gr(()=>t[32].call(J)),l(q,"for","entry_price"),l(q,"class","block mb-1"),l(Y,"type","text"),l(Y,"name","entry_price"),l(Y,"class","svelte-zftrlb"),l(pe,"class","px-4 py-2 border border-l-0 border-gray-500 bg-gray-700"),l(Z,"class","flex"),l(te,"for","bo_size"),l(te,"class","block mb-1"),l(F,"type","number"),l(F,"name","bo_size"),l(F,"step","0.01"),l(F,"class","svelte-zftrlb"),he.__value="%",he.value=he.__value,Te.__value="price",Te.value=Te.__value,l(K,"name","$base_order_type"),l(K,"class","focus:ring-indigo-500 focus:border-indigo-500 bg-gray-700"),t[13].type===void 0&&gr(()=>t[35].call(K)),l(H,"class","flex"),l(De,"for","so_size"),l(De,"class","block mb-1"),l(le,"type","number"),l(le,"name","so_size"),l(le,"step","0.01"),l(le,"class","svelte-zftrlb"),ke.__value="%",ke.value=ke.__value,ze.__value="price",ze.value=ze.__value,l($,"name","so_type"),l($,"class","focus:ring-indigo-500 focus:border-indigo-500 bg-gray-700"),t[12].type===void 0&&gr(()=>t[37].call($)),l(me,"class","flex"),l(R,"for","take_profit"),l(R,"class","block mb-1"),l(W,"type","number"),l(W,"name","take_profit"),l(W,"min","0.05"),l(W,"max","50"),l(W,"step","0.01"),l(W,"class","svelte-zftrlb"),l(se,"class","px-4 py-2 border border-l-0 border-gray-500 bg-gray-700"),l(G,"class","flex"),l(et,"for","long"),l(et,"class","block mb-1"),l(Ee,"type","checkbox"),l(Ee,"name","long"),l(Ee,"class","focus:ring-indigo-500 focus:border-indigo-500 bg-gray-900 svelte-zftrlb"),l(tt,"class","flex"),l(Tt,"for","max_safety_trades"),l(Tt,"class","block mb-1"),l(qe,"name","max_safety_trades"),l(qe,"type","range"),l(qe,"class","block w-full mr-3 svelte-zftrlb"),l(qe,"min","0"),l(qe,"max","100"),l(Ge,"type","number"),l(Ge,"min","0"),l(Ge,"max","100"),l(Ge,"class","svelte-zftrlb"),l(ct,"class","flex"),l(ut,"class","col-span-3"),l(kt,"for","leverage"),l(kt,"class","block mb-1"),l(Ve,"name","leverage"),l(Ve,"type","range"),l(Ve,"class","block w-full mr-3 svelte-zftrlb"),l(Ve,"min","1"),l(Ve,"max",sl=((a=t[6][0])==null?void 0:a.maxLeverage)||20),l(we,"type","number"),l(we,"min","1"),l(we,"max",nl=((p=t[6][0])==null?void 0:p.maxLeverage)||20),l(we,"class","svelte-zftrlb"),l(_t,"class","flex"),l(ft,"class","col-span-3"),l(It,"for","price_deviation"),l(It,"class","block mb-1"),l(Ne,"name","price_deviation"),l(Ne,"type","range"),l(Ne,"class","block w-full mr-3 svelte-zftrlb"),l(Ne,"min","0.2"),l(Ne,"max","12"),l(Ne,"step","0.01"),l(We,"type","number"),l(We,"min","0.2"),l(We,"max","12"),l(We,"step","0.01"),l(We,"class","svelte-zftrlb"),l(Pt,"class","px-4 py-2 border border-l-0 border-gray-500 bg-gray-700"),l(lt,"class","flex"),l(vt,"class","col-span-3"),l(Lt,"for","so_volume_scale"),l(Lt,"class","block mb-1"),l(Re,"name","so_volume_scale"),l(Re,"type","range"),l(Re,"class","block w-full mr-3 svelte-zftrlb"),l(Re,"min","0.1"),l(Re,"max","10"),l(Re,"step","0.01"),l(Ce,"type","number"),l(Ce,"min","0.1"),l(Ce,"max","10"),l(Ce,"step","0.01"),l(Ce,"class","svelte-zftrlb"),l(dt,"class","flex"),l(pt,"class","col-span-3"),l(Dt,"for","so_step_scale"),l(Dt,"class","block mb-1"),l(Se,"name","so-step-scale"),l(Se,"type","range"),l(Se,"class","block w-full mr-3 svelte-zftrlb"),l(Se,"min","0.1"),l(Se,"max","10"),l(Se,"step","0.01"),l(He,"type","number"),l(He,"min","0.1"),l(He,"max","5"),l(He,"step","0.01"),l(He,"class","svelte-zftrlb"),l(bt,"class","flex"),l(ht,"class","col-span-3"),l(r,"class","col-span-2 grid grid-cols-3 gap-6"),l(s,"class","grid grid-cols-3 gap-8"),l(ot,"type","checkbox"),l(ot,"class","svelte-zftrlb"),l(Vt,"class","svelte-zftrlb"),l(Nt,"class","svelte-zftrlb"),l(Rt,"class","svelte-zftrlb"),l(St,"class","svelte-zftrlb"),l(Ot,"class","svelte-zftrlb"),l(Ut,"class","svelte-zftrlb"),l(At,"class","svelte-zftrlb")},m(a,p){A(a,s,p),e(s,r),e(r,v),e(v,m),e(m,L),e(v,I),e(v,_),e(_,g),S(g,t[9]),e(_,V),e(_,b),e(b,E),e(r,N),e(r,Q),e(Q,M),e(M,oe),e(Q,X),e(Q,J);for(let P=0;P<ue.length;P+=1)ue[P].m(J,null);Jt(J,t[7]),e(r,ye),e(r,ee),e(ee,q),e(q,Je),e(ee,w),e(ee,Z),e(Z,Y),S(Y,t[1]),e(Z,Ue),e(Z,pe),e(pe,de),e(r,at),e(r,j),e(j,te),e(te,Ze),e(j,Ae),e(j,H),e(H,F),S(F,t[13].value),e(H,$e),e(H,Ke),e(Ke,K),e(K,he),e(he,rt),e(K,Te),e(Te,Le),Jt(K,t[13].type),e(j,Qe),ce&&ce.m(j,null),e(r,xe),e(r,ie),e(ie,De),e(De,be),e(ie,Ye),e(ie,me),e(me,le),S(le,t[12].value),e(me,Fe),e(me,Me),e(Me,$),e($,ke),e(ke,st),e($,ze),e(ze,B),Jt($,t[12].type),e(ie,ae),fe&&fe.m(ie,null),e(r,D),e(r,Pe),e(Pe,R),e(R,re),e(Pe,x),e(Pe,G),e(G,W),S(W,t[11]),e(G,ge),e(G,se),e(se,Be),e(r,it),e(r,nt),e(nt,et),e(et,yt),e(nt,Kt),e(nt,tt),e(tt,Ee),Ee.checked=t[17],e(tt,Qt),e(r,Yl),e(r,ut),e(ut,Tt),e(Tt,Fl),e(ut,Gl),e(ut,ct),e(ct,qe),S(qe,t[12].count),e(ct,Xl),e(ct,Ge),S(Ge,t[12].count),e(r,Zl),e(r,ft),e(ft,kt),e(kt,$l),e(ft,xl),e(ft,_t),e(_t,Ve),S(Ve,t[8]),e(_t,ea),e(_t,we),S(we,t[8]),e(r,ta),e(r,vt),e(vt,It),e(It,la),e(vt,aa),e(vt,lt),e(lt,Ne),S(Ne,t[12].price_dev),e(lt,ra),e(lt,We),S(We,t[12].price_dev),e(lt,sa),e(lt,Pt),e(Pt,na),e(r,oa),e(r,pt),e(pt,Lt),e(Lt,ia),e(pt,ua),e(pt,dt),e(dt,Re),S(Re,t[12].volume_scale),e(dt,ca),e(dt,Ce),S(Ce,t[12].volume_scale),e(r,fa),e(r,ht),e(ht,Dt),e(Dt,_a),e(ht,va),e(ht,bt),e(bt,Se),S(Se,t[12].step_scale),e(bt,pa),e(bt,He),S(He,t[12].step_scale),e(s,da),e(s,y),e(y,ha),e(y,ba),e(y,ma),e(y,ol),e(y,ga),e(y,il),e(y,Ea),e(y,ya),e(y,Ta),e(y,ul),e(y,ka),e(y,Ia),e(y,La),e(y,cl),e(y,Da),e(y,za),e(y,Pa),e(y,fl),e(y,Ba),e(y,Va),e(y,Na),e(y,Ra),e(y,Sa),e(y,Oa),e(y,Ua),e(y,Aa),e(y,Ma),e(y,_l),e(y,qa),e(y,wa),e(y,Wa),e(y,vl),e(y,Ca),e(y,Ha),e(y,ja),e(y,pl),e(y,Ja),e(y,Ka),e(y,Qa),e(y,dl),e(y,Ya),e(y,Fa),e(y,Ga),e(y,hl),e(y,Xa),e(y,Za),e(y,$a),e(y,bl),e(y,xa),e(y,er),A(a,ml,p),A(a,gl,p),A(a,El,p),A(a,ot,p),ot.checked=t[10],A(a,yl,p),A(a,Tl,p),A(a,kl,p),A(a,Il,p),A(a,Ll,p);for(let P=0;P<_e.length;P+=1)_e[P].m(a,p);A(a,Bt,p),A(a,Dl,p),A(a,zl,p),A(a,mt,p),e(mt,rl),e(rl,ne),e(ne,Vt),e(Vt,tr),e(ne,lr),e(ne,Nt),e(Nt,ar),e(ne,rr),e(ne,Rt),e(Rt,sr),e(ne,nr),e(ne,St),e(St,or),e(ne,ir),e(ne,Ot),e(Ot,ur),e(ne,cr),e(ne,Ut),e(Ut,fr),e(ne,_r),e(ne,At),e(At,vr),e(mt,pr),e(mt,Mt);for(let P=0;P<ve.length;P+=1)ve[P].m(Mt,null);dr||(yr=[U(g,"input",t[31]),U(J,"change",t[32]),U(Y,"input",t[33]),U(F,"input",t[34]),U(K,"change",t[35]),U(le,"input",t[36]),U($,"change",t[37]),U(W,"input",t[38]),U(Ee,"change",t[39]),U(qe,"change",t[40]),U(qe,"input",t[40]),U(Ge,"input",t[41]),U(Ve,"change",t[42]),U(Ve,"input",t[42]),U(we,"input",t[43]),U(Ne,"change",t[44]),U(Ne,"input",t[44]),U(We,"input",t[45]),U(Re,"change",t[46]),U(Re,"input",t[46]),U(Ce,"input",t[47]),U(Se,"change",t[48]),U(Se,"input",t[48]),U(He,"input",t[49]),U(ot,"change",t[50])],dr=!0)},p(a,p){var P,zt;if(p[0]&512&&C(g.value)!==a[9]&&S(g,a[9]),p[0]&1){qt=a[0];let z;for(z=0;z<qt.length;z+=1){const Oe=fs(a,qt,z);ue[z]?ue[z].p(Oe,p):(ue[z]=_s(Oe),ue[z].c(),ue[z].m(J,null))}for(;z<ue.length;z+=1)ue[z].d(1);ue.length=qt.length}if(p[0]&129&&Jt(J,a[7]),p[0]&2&&Y.value!==a[1]&&S(Y,a[1]),p[0]&8192&&C(F.value)!==a[13].value&&S(F,a[13].value),p[0]&8192&&Jt(K,a[13].type),a[13].type=="%"?ce?ce.p(a,p):(ce=vs(a),ce.c(),ce.m(j,null)):ce&&(ce.d(1),ce=null),p[0]&4096&&C(le.value)!==a[12].value&&S(le,a[12].value),p[0]&4096&&Jt($,a[12].type),a[12].type=="%"?fe?fe.p(a,p):(fe=ps(a),fe.c(),fe.m(ie,null)):fe&&(fe.d(1),fe=null),p[0]&2048&&C(W.value)!==a[11]&&S(W,a[11]),p[0]&131072&&(Ee.checked=a[17]),p[0]&4096&&S(qe,a[12].count),p[0]&4096&&C(Ge.value)!==a[12].count&&S(Ge,a[12].count),p[0]&64&&sl!==(sl=((P=a[6][0])==null?void 0:P.maxLeverage)||20)&&l(Ve,"max",sl),p[0]&256&&S(Ve,a[8]),p[0]&64&&nl!==(nl=((zt=a[6][0])==null?void 0:zt.maxLeverage)||20)&&l(we,"max",nl),p[0]&256&&C(we.value)!==a[8]&&S(we,a[8]),p[0]&4096&&S(Ne,a[12].price_dev),p[0]&4096&&C(We.value)!==a[12].price_dev&&S(We,a[12].price_dev),p[0]&4096&&S(Re,a[12].volume_scale),p[0]&4096&&C(Ce.value)!==a[12].volume_scale&&S(Ce,a[12].volume_scale),p[0]&4096&&S(Se,a[12].step_scale),p[0]&4096&&C(He.value)!==a[12].step_scale&&S(He,a[12].step_scale),p[0]&4&&Yt!==(Yt=T(a[2].total_margin)+"")&&O(ol,Yt),p[0]&516&&Ft!==(Ft=T(a[2].total_margin/a[9]*100)+"")&&O(il,Ft),p[0]&4&&Gt!==(Gt=T(a[2].total_volume)+"")&&O(ul,Gt),p[0]&256&&Xt!==(Xt=T(a[8])+"")&&O(cl,Xt),p[0]&4&&Zt!==(Zt=T(a[2].price_dev)+"")&&O(fl,Zt),p[0]&4&&$t!==($t=T(a[2].total_margin)+"")&&O(_l,$t),p[0]&4&&xt!==(xt=T(-a[2].pnl)+"")&&O(vl,xt),p[0]&516&&el!==(el=T(a[9]-a[2].total_margin+a[2].pnl)+"")&&O(pl,el),p[0]&16384&&tl!==(tl=T(a[14])+"")&&O(dl,tl),p[0]&16386&&ll!==(ll=-T(100-a[14]/a[1]*100)+"")&&O(hl,ll),p[0]&16390&&al!==(al=-T(100-a[14]/a[1]*100+a[2].price_dev)+"")&&O(bl,al),p[0]&1024&&(ot.checked=a[10]),p[0]&98304){wt=a[15]?[a[16]||a[15]]:[];let z;for(z=0;z<wt.length;z+=1){const Oe=us(a,wt,z);_e[z]?_e[z].p(Oe,p):(_e[z]=hs(Oe),_e[z].c(),_e[z].m(Bt.parentNode,Bt))}for(;z<_e.length;z+=1)_e[z].d(1);_e.length=wt.length}if(p[0]&33620026){Wt=a[3];let z;for(z=0;z<Wt.length;z+=1){const Oe=is(a,Wt,z);ve[z]?ve[z].p(Oe,p):(ve[z]=bs(Oe),ve[z].c(),ve[z].m(Mt,null))}for(;z<ve.length;z+=1)ve[z].d(1);ve.length=Wt.length}},i:os,o:os,d(a){a&&i(s),Ql(ue,a),ce&&ce.d(),fe&&fe.d(),a&&i(ml),a&&i(gl),a&&i(El),a&&i(ot),a&&i(yl),a&&i(Tl),a&&i(kl),a&&i(Il),a&&i(Ll),Ql(_e,a),a&&i(Bt),a&&i(Dl),a&&i(zl),a&&i(mt),Ql(ve,a),dr=!1,ns(yr)}}}async function Us({fetch:t}){return{props:{prices:(await t("https://fapi.binance.com/fapi/v1/ticker/price").then(r=>r.json())).filter(r=>r.symbol.endsWith("USDT"))}}}let je="USDT",ms=1;function T(t){return t.toLocaleString(void 0,{maximumSignificantDigits:5})}function gs(t,s){let r=t/s,v=Math.ceil(r/ms)*ms;return t*=v/r,[v,t]}function Es(t,s,r){if(t<0||t>1||t!=0&&!t)return"";const v=r.findIndex(b=>t<=b.perc)||1,m=r[v-1],L=r[v],I=(t-m.perc)/(L.perc-m.perc),_=1-I,g=I,V={r:Math.floor(m.color.r*_+L.color.r*g),g:Math.floor(m.color.g*_+L.color.g*g),b:Math.floor(m.color.b*_+L.color.b*g)};return"rgba("+[V.r,V.g,V.b,s].join(",")+")"}function Rs(t,s,r){let v,m,L,I,_,g,V,b,E,N,Q,{prices:M}=s,{brackets:oe}=s,X=1;const J=Et("3c.balance",1e4);gt(t,J,B=>r(9,g=B));const ye=Et("3c.coin","BTCUSDT");gt(t,ye,B=>r(7,I=B));const ee=Et("3c.base_order",{value:10,type:"%"});gt(t,ee,B=>r(13,N=B));const q=Et("3c.safety_order",{count:15,value:5,type:"%",price_dev:.99,volume_scale:1.3,step_scale:1});gt(t,q,B=>r(12,E=B));const Je=Et("3c.take_profit",.6);gt(t,Je,B=>r(11,b=B));const w=Et("3c.leverage",20);gt(t,w,B=>r(8,_=B));const Z=Et("3c.long",!0);gt(t,Z,B=>r(17,Q=B));const Y=Et("3c.reverse",!0);gt(t,Y,B=>r(10,V=B));let Ue,pe,de=[],at=[{perc:0,color:{r:0,g:255,b:0}},{perc:.5,color:{r:0,g:255,b:255}},{perc:1,color:{r:0,g:0,b:255}}],j=b,te=b,Ze,Ae="";Vs("3c.brackets-cache",24*60*60,()=>fetch("https://cors.bridged.cc/https://www.binance.com/bapi/futures/v1/friendly/future/common/brackets",{headers:{"content-type":"application/json"},body:"{}",method:"POST"}).then(B=>B.json())).then(B=>{r(27,oe=B.data.brackets.map(ae=>({symbol:ae.symbol,brackets:ae.riskBrackets.map(D=>({volume_cap:D.bracketNotionalCap,minLeverage:D.minOpenPosLeverage,maxLeverage:D.maxOpenPosLeverage}))})))});let H;function F(){g=C(this.value),J.set(g)}function $e(){I=Er(this),ye.set(I),r(0,M)}function Ke(){X=this.value,r(1,X),r(7,I),r(28,Ae),r(0,M)}function K(){N.value=C(this.value),ee.set(N)}function he(){N.type=Er(this),ee.set(N)}function rt(){E.value=C(this.value),q.set(E)}function Te(){E.type=Er(this),q.set(E)}function Le(){b=C(this.value),Je.set(b)}function Qe(){Q=this.checked,Z.set(Q)}function xe(){E.count=C(this.value),q.set(E)}function ie(){E.count=C(this.value),q.set(E)}function De(){_=C(this.value),w.set(_)}function be(){_=C(this.value),w.set(_)}function Ye(){E.price_dev=C(this.value),q.set(E)}function me(){E.price_dev=C(this.value),q.set(E)}function le(){E.volume_scale=C(this.value),q.set(E)}function Fe(){E.volume_scale=C(this.value),q.set(E)}function Me(){E.step_scale=C(this.value),q.set(E)}function $(){E.step_scale=C(this.value),q.set(E)}function ke(){V=this.checked,Y.set(V)}const st=B=>r(16,H=B.errors.length>0?B:void 0),ze=()=>r(16,H=void 0);return t.$$set=B=>{"prices"in B&&r(0,M=B.prices),"brackets"in B&&r(27,oe=B.brackets)},t.$$.update=()=>{var B,ae,D,Pe;if(t.$$.dirty[0]&134217856&&r(6,m=((B=oe==null?void 0:oe.find(R=>R.symbol==I))==null?void 0:B.brackets)||[]),t.$$.dirty[0]&320&&_>((ae=m[0])==null?void 0:ae.maxLeverage)&&Bs(w,_=(D=m[0])==null?void 0:D.maxLeverage,_),t.$$.dirty[0]&320&&r(29,L=m==null?void 0:m.find(R=>R.minLeverage<=_&&_<=R.maxLeverage)),t.$$.dirty[0]&536871424&&r(30,v=R=>{let re=[];return R.total_margin>g&&re.push(`Total margin used (${T(R.total_margin)}$) is more than available balance (${T(g)}$)`),-R.pnl>g&&re.push(`PnL (${T(R.pnl)}$) is higher than available balance (${T(g)}$). Will be liquidated`),R.total_volume>(L==null?void 0:L.volume_cap)&&re.push(`Total volume (${T(R.total_volume)}$) is higher than future volume cap (${T(L==null?void 0:L.volume_cap)}$)`),re}),t.$$.dirty[0]&268435585&&I!=Ae&&(r(28,Ae=ye),r(1,X=((Pe=M==null?void 0:M.find(R=>R.symbol==I))==null?void 0:Pe.price)||1)),t.$$.dirty[0]&1073758014){let R=N.value;N.type=="%"&&(R=g*N.value/100);let re=E.value;E.type=="%"&&(re=g*E.value/100);let x=[],G=0,W=X,[ge,se]=gs(R,X);x.push({order:"BO",price_dev:0,price:X,avg_price:W,size:ge,margin:se/_,volume:R,req_price:X*(1+b/100),req_change:b,pnl:0,tp:se*b/100,total_size:ge,total_volume:se,total_margin:se/_}),r(4,j=b),r(5,te=b);for(let Be=0;Be<E.count;Be++){G=G*E.step_scale-E.price_dev;const it=X*(1+G/100),nt=re*Math.pow(E.volume_scale,Be),[et,yt]=gs(nt,it);se+=yt,ge+=et,W=se/ge;const Kt=se/_,tt=W*(1+b/100),Ee=(tt/it-1)*100,Qt=-(1-it/W)*se;Ee<j&&r(4,j=Ee),Ee>te&&r(5,te=Ee),x.push({order:`#${Be+1}`,price_dev:G,price:it,avg_price:W,size:et,margin:yt/_,volume:yt,req_price:tt,req_change:Ee,tp:se*b/100,pnl:Qt,total_size:ge,total_volume:se,total_margin:Kt})}x=x.map(Be=>ls(ts({},Be),{errors:v(Be)})),r(15,Ze=x.find(Be=>Be.errors.length>0)),r(3,de=x),r(2,Ue=de[de.length-1]),V&&r(3,de=de.reverse()),r(14,pe=Ue.avg_price*(1-g/Ue.total_volume))}},[M,X,Ue,de,j,te,m,I,_,g,V,b,E,N,pe,Ze,H,Q,J,ee,q,Je,w,Z,Y,at,ye,oe,Ae,L,v,F,$e,Ke,K,he,rt,Te,Le,Qe,xe,ie,De,be,Ye,me,le,Fe,Me,$,ke,st,ze]}class As extends Ds{constructor(s){super();zs(this,s,Rs,Ns,Ps,{prices:0,brackets:27},null,[-1,-1,-1])}}export{As as default,Us as load};
